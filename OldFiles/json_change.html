<!-- 
Document   : jso
Created on : Feb 23, 2015, 5:29:42 AM
Author     : jiechen
--!>
<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
				<meta name="viewport" content="width=device-width, initial-scale=1">
                <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
                <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
                <link href="my.css" type="text/css" rel="stylesheet" />

		<script>

			$(document).ready(function()  { 
				// String='neo4j.json';
				$('#MyButton').click(function(){
					//var people = [];

					var data_file = "http://localhost:7654/Result/"+document.getElementById('mytext').value.toString();
					var data_file = "http://localhost:3000/all";
					
					$.ajax({
						//type:"GET", 
						url: data_file, 
						dataType: 'json',
						contentType: "application/json",
						crossDomain: true,
						success: function(data) {
							$("#userdata tbody").empty();
							$("#userdata2 tbody").empty();

							$.each(data, function(i,f) {
								$.each(f.searchResult, function(i,f1) {
									var tblRow = "<tr>" +"<td>" + f1.keyword + "</td>"+ "<td>" + f1.record + "</td>" +
										"<td>" + f1.column + "</td>" + "<td>" + f1.table + "</td>" + "<td>" + f1.database + "</td>" + "</tr>"
									$(tblRow).appendTo("#userdata tbody");
								}); 

								$.each(f.join, function(i,f2) {
									var tblRow = "<tr>" +"<td>" + f2.cost + "</td>"+ "<td>" + f2.rank + "</td>" +
										"<td>" + f2.relations + "</td>" + "</tr>"
									$(tblRow).appendTo("#userdata2 tbody");

								}); 
							}); 
						}, 
						error: function(jqXHR, textStatus, errorThrown) {
							alert(textStatus);
						},
					});
					
					$("#search").removeClass('container').addClass('container2');
					$("#group").removeClass('form-group').addClass('form-group2');
					$("#logo").removeClass('img-rounded').addClass('img-small');
					$("#mytext").removeClass('form-control').addClass('form-control2');
					$("#MyButton").removeClass('btn btn-primary').addClass('btn-second');
					

				});
			});

		</script>
	</head>


	<body>
	<div class="header">
                <ul class="nav nav-pills">
                        <li><a href="home.html">Home</a></li>
                        <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">
                        Entries <span class="caret"></span>
                        </a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Group #1</a></li>
                                <li><a href="#">Group #2</a></li>
                                <li><a href="#">Group #3</a></li>
                            </ul>
                       </li>
            </div>

		<div id="search" class="container" >
		         <img id="logo" src="logo.png" class="img-rounded" >
			<div id ="group" class="form-group" >
					<input type="text" id='mytext' align="left" class="form-control">
					<button type="button"  id="MyButton" class="btn btn-primary">Search</button>
				
				</div>
				<form id="myform">


					<table id= "userdata" align="center" class="table table-striped" >

						<thead>
						<tr align="center" font-weight="bold">
							<td bgcolor="#BBFFFF"><B>KeyWords</B></td>							
							<td bgcolor="#BBFFFF"><B>Record</B></td>
							<td bgcolor="#BBFFFF"><B>Column</B></td>
							<td bgcolor="#BBFFFF"><B>Table</B></td>
							<td bgcolor="#BBFFFF"><B>Database</B></td>
						</tr>
						</thead>
						<tbody>

						</tbody>
					</table>

					<table id= "userdata2" align="center" class="table table-striped" >

						<thead>
						<tr align="center" font-weight="bold">
							<th>Cost</th>
							<th>Rank</th>
							<th>Relation</th>
							</tr>
						</thead>
						<tbody>

						</tbody>
					</table>
				</form>
			</div>
		</div>

	</body>
</html>
